deployNFS:
  enabled: false
environment:
  deployNFS:
    enabled: false
  getClientToken:
    enabled: false
  grafanaPrefix:
    cluster: k8s
    dc: cyf
    experiment: orzech-test
    release: release18020-rc11
  oneclient:
    args: --force-fullblock-read --monitoring-type graphite -v 2 --monitoring-level-full
      --monitoring-period 10 --graphite-url "$GRAFANA_URL" --graphite-namespace-prefix
      "$graphite_prefix" --force-direct-io ${MOUNT_POINT}
    grafanaUrl: go-carbon.mon.svc.dev.onedata.uk.to
    graphite_prefix: exper.${experiment}.date.${date}.args.${args}.release.${release}.dc.${dc}.cluster.${cluster}.host.${MY_NODE_NAME}.k8s_pod.${MY_POD_NAMESPACE}-${MY_POD_NAME}
    insecure: "true"
    mountPoint: /mnt/oneclient
  persistence:
    claimName: obench-nfs-stress-nfs-pvc
    enabled: true
grafanaSnapshots:
  enabled: true
  grafanaDashboardFolder: ObenchDashboards
  grafanaGUIUrl: grafana.mon.svc.dev.onedata.uk.to
  password: admin
  username: admin
ioping_config:
  compute:
    command: |-
      apk update; apk add bash;
      prepare() {
        echo "Changing working directo to: $work_dir" ;
        cd "$work_dir" ;
        pwd ;
        printf "$(date) " ; echo "Starting ioping prep with truncate." ;
        eval truncate $env_prepare_args ;
        printf "$(date) " ; echo "ioping prep end" ;
      } ;
      compute() {
        printf "$(date)" ; echo "Starting computation sysbench run." ;
        bash -c 'eval ioping $env_compute_args | tee >(sed -ne "/ioping statistics/,$ p" > /results/compute_results)' ;
        printf "$(date) " ; echo "sysbench compute end" ;
      } ;
      clean() {
        printf "$(date)" ; echo "Starting cleaning." ;
        echo "No cleaning needed." ;
        printf "$(date) " ; echo "clean end" ;
      } ;
    dataMountPoint: /mnt/oneclient
    env:
      clean_args: ""
      compute_args: -c 5 -i 0 -S 10G ioping.$((jobId%jobReplicas))
      prepare_args: -s 10G ioping.$((jobId%jobReplicas))
    image: karteek/alpine-ioping:latest
    shell: sh
    spaceName: krk-iu
  job_replicas: 1
  name: ioping
jobController:
  jobChartVersion: 0.1.3
jobs:
- config:
    compute:
      command: |-
        prepare() {
          echo "Changing working directory to: $work_dir" ;
          cd "$work_dir" ;
          pwd ;
          printf "$(date) " ; echo "Starting sysbench prep." ;
          eval sysbench $env_prepare_args ;
          printf "$(date) " ; echo "sysbench prep end" ;
        } ;
        compute() {
          printf "$(date) " ; echo "Starting computation sysbench run." ;
          bash -c 'sysbench $0 | tee >(sed -ne "/File operations/,$ p" > /results/compute_results)' "$env_compute_args" ;
          printf "$(date) " ; echo "sysbench compute end" ;
        } ;
        clean() {
          printf "$(date) " ; echo "Starting cleaning." ;
          echo "No cleaning needed." ;
          printf "$(date) " ; echo "clean end" ;
        } ;
      dataMountPoint: /mnt/oneclient
      env:
        clean_args: ""
        compute_args: --test=fileio --file-num=1 --file-block-size=1M --file-total-size=100M
          --file-test-mode=seqrd --file-io-mode=sync run
        prepare_args: --test=fileio --file-num=1 --file-block-size=1M --file-total-size=100M
          --file-test-mode=seqrd --file-io-mode=sync prepare
      image: severalnines/sysbench:latest
      shell: sh
      spaceName: krk-iu
    job_replicas: 1
    name: sysbench
  dashboards:
  - dashboard: |-
      {
          "dashboard": {
    name: Sysbench Dasbaord
  name: sysbench
- config:
    compute:
      command: |-
        apk update; apk add bash;
        prepare() {
          echo "Changing working directo to: $work_dir" ;
          cd "$work_dir" ;
          pwd ;
          printf "$(date) " ; echo "Starting ioping prep with truncate." ;
          eval truncate $env_prepare_args ;
          printf "$(date) " ; echo "ioping prep end" ;
        } ;
        compute() {
          printf "$(date)" ; echo "Starting computation sysbench run." ;
          bash -c 'eval ioping $env_compute_args | tee >(sed -ne "/ioping statistics/,$ p" > /results/compute_results)' ;
          printf "$(date) " ; echo "sysbench compute end" ;
        } ;
        clean() {
          printf "$(date)" ; echo "Starting cleaning." ;
          echo "No cleaning needed." ;
          printf "$(date) " ; echo "clean end" ;
        } ;
      dataMountPoint: /mnt/oneclient
      env:
        clean_args: ""
        compute_args: -c 5 -i 0 -S 10G ioping.$((jobId%jobReplicas))
        prepare_args: -s 10G ioping.$((jobId%jobReplicas))
      image: karteek/alpine-ioping:latest
      shell: sh
      spaceName: krk-iu
    job_replicas: 1
    name: ioping
  dashboards:
  - dashboard: |-
      {
          "dashboard": {
    name: Ioping Dasbaord
  name: ioping
oneclient_dashboard: |-
  {
      "dashboard": {
persistence:
  claimName: obench-nfs-stress-nfs-pvc
  enabled: true
results:
  git:
    commitAuthor: groundnuty <michal.orzechowski@cyfronet.pl>
    commitMessage: results of ${MY_POD_NAME}
    enabled: true
    repository: git@github.com:groundnuty/reports.git
    sshPrivateKey: |-
      -----BEGIN RSA PRIVATE KEY-----
      MIIEowIBAAKCAQEAtqESxQtMA0BplZoa8tC4trLzkdgB94HDO9Q+5H6M4+G1O9Fc
      vnkhR7tXPfoz5NQL2Irrll2CaBXOONdS1+NiGrbxj8hqPrxSIGf40hX3KOOX1yas
      NFZEI+MGvgpC2jDcGsnZEkwG1ZJXzk3FgWwYiGjRe0dRegacFfVlU4TM3sFBXZiC
      HdQz9UTg/4jEhqXkxeY+tcmqeMGpcOghwSU1uzPMT43106/fiKGf4SqLLXuVBL/Z
      qFSFsYDagyS3cJqavPrDwu0duT5K7RFGh5D4sxhYy2VQERQufcyDnCAaJrff8fc5
      FfWxUJjvqZEnrIPJSm389f/gVoAnvJ6fjPavWQIDAQABAoIBAAVs9ZzLACAcmsZq
      BKDwGHy9BkVv8GcFAOLXJGMva0od23+Cccnq2VVDOI1L0Jzcu9lcDzGxZ31mIHFJ
      3FkzlSeMBdMqthVVDO+PhzHemzAoyssGiBkp8u5KAVpF/cRzrSZSltNXVOClb1xe
      rR5yMqxiyM5ryPziE2MHnlID4P5BHK3jTjkuO7N1ZiiYCwk5Z/cFdUPlOhqsrwT0
      sfJOx1nyfb1B5zCGdWaAJuFNQcbIGl+0/yP2BkVHDs3lOPwWp6C06hOosee156E8
      3ji342S8p9HaW37moMFGLoTcIWIFcssAp/9RDTSLa9cElcc5mJgsY3qqquoHuQIa
      8naR2U0CgYEA41+G8wGhY69wA036p2ab9YHYtSgLvMnFTP32SHlPJwJKr7jmzl/v
      bt4ITuSzNKaEu58bVhahF7T4uIUTdua6G7hdZcg+IpQE0wk/DEuznn8AE2+D423w
      fJZGzz6f97JUoaorUR7ETgFD1jBn252fUnA36TY/7rmMweI2AjAelOsCgYEAzZ9m
      4LKwIjphFCEG/xyP5G2L2yiyfUcCcxyY2MEZ0ReZmti0gbm/ZePae4cIWtxx5em8
      VSkmL1w1jMONpuyJn1DN6c2dSbg/vByOlYnSB648wBkx2NCd455LOKIMyni/s4FT
      3GYHHOMrf/kr0nXLozFjONIBvbdtR18VDCLRi8sCgYEA4sQZQS81GMiV/JW/EUnC
      7b4MtdA0tJq/jiQThwCFsrAUcOEGQHlpwLbsrlJlcHNLGhx7FQcIry4siUsfuIww
      vQjJDYQChFX/4cHtAYRWphKfrsKfVSoGmRr/kB4zSMSwp3OiNAttWSbl0y7/xgaU
      KZIGES+r35lrCstjdhcryPUCgYAzu/xdYnfwVLHiJ6EkBKKrfWhnvqiR3pDeN365
      YnRFaGOsUwOvc/WVBCwPUl0mxzoc95776juCRPfwL69vJSpHHESCo8oEJ0hZ4vF4
      7FEcv5jnWC9zdqGTCFuypwsC0jihSFO6Ky109i8WprGA5URUDfQB8syfWAw1ndWk
      1QnV2wKBgBKH1HfYUA3+pG39XHbHSUyoy1B+SxFphjtfSqRxy1gYxrQav3WzSGsM
      vpfh4vyRl6ZFWnQEjUk1TOhC5nw+d7EhfDDFH9tXeVISaAMom+qhgYn6F9O363O5
      4BHmXNvgqkPPzcEuvNXWsCdOwpPfyX+pkQBNEwnHvkojTlVapLYc
      -----END RSA PRIVATE KEY-----
    userEmail: bamboo@plg-web12.grid.cyf-kr.edu.pl
    userName: Bamboo role account
sysbench_config:
  compute:
    command: |-
      prepare() {
        echo "Changing working directory to: $work_dir" ;
        cd "$work_dir" ;
        pwd ;
        printf "$(date) " ; echo "Starting sysbench prep." ;
        eval sysbench $env_prepare_args ;
        printf "$(date) " ; echo "sysbench prep end" ;
      } ;
      compute() {
        printf "$(date) " ; echo "Starting computation sysbench run." ;
        bash -c 'sysbench $0 | tee >(sed -ne "/File operations/,$ p" > /results/compute_results)' "$env_compute_args" ;
        printf "$(date) " ; echo "sysbench compute end" ;
      } ;
      clean() {
        printf "$(date) " ; echo "Starting cleaning." ;
        echo "No cleaning needed." ;
        printf "$(date) " ; echo "clean end" ;
      } ;
    dataMountPoint: /mnt/oneclient
    env:
      clean_args: ""
      compute_args: --test=fileio --file-num=1 --file-block-size=1M --file-total-size=100M
        --file-test-mode=seqrd --file-io-mode=sync run
      prepare_args: --test=fileio --file-num=1 --file-block-size=1M --file-total-size=100M
        --file-test-mode=seqrd --file-io-mode=sync prepare
    image: severalnines/sysbench:latest
    shell: sh
    spaceName: krk-iu
  job_replicas: 1
  name: sysbench
